Removed unique_lock, added on-thread-exit version of signal